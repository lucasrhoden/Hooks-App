(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,t,n){e.exports=n(38)},26:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(18),o=n.n(c),i=n(13),l=(n(26),n(1)),u=n(6),s=n(10),m=n(20),d=(n(27),r.a.memo(function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"backdrop",onClick:e.onClose}),r.a.createElement("div",{className:"error-modal"},r.a.createElement("h2",null,"An Error Occurred!"),r.a.createElement("p",null,e.children),r.a.createElement("div",{className:"error-modal__actions"},r.a.createElement("button",{type:"button",onClick:e.onClose},"Okay"))))})),E=(n(28),function(){return r.a.createElement("div",{className:"lds-ring"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))}),f=(n(29),function(e){return r.a.createElement("div",{className:"card"},e.children)}),h=(n(30),r.a.memo(function(e){var t=Object(a.useState)(""),n=Object(u.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)(""),l=Object(u.a)(i,2),s=l[0],m=l[1];return r.a.createElement("section",{className:"ingredient-form"},r.a.createElement(f,null,r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.onAddIngredient({title:c,amount:s})}},r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"title"},"Name"),r.a.createElement("input",{type:"text",id:"title",value:c,onChange:function(e){return o(e.target.value)}})),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"amount"},"Amount"),r.a.createElement("input",{type:"number",id:"amount",value:s,onChange:function(e){return m(e.target.value)}})),r.a.createElement("div",{className:"ingredient-form__actions"},r.a.createElement("button",{type:"submit"},"Add Ingredient"),e.loading?r.a.createElement(E,null):null))))})),p=(n(31),r.a.memo(function(e){var t=Object(a.useState)(""),n=Object(u.a)(t,2),c=n[0],o=n[1],i=e.onLoadIngredients,l=Object(a.useRef)();return Object(a.useEffect)(function(){var e=setTimeout(function(){if(c===l.current.value){var e=0===c.length?"":'?orderBy="title"&equalTo="'.concat(c,'"');fetch("https://react-hooks-72dd3.firebaseio.com/ingredients.json"+e).then(function(e){return e.json()}).then(function(e){var t=[];for(var n in e)t.push({id:n,title:e[n].title,amount:e[n].amount});i(t)})}},500);return function(){clearTimeout(e)}},[c,i]),r.a.createElement("section",{className:"search"},r.a.createElement(f,null,r.a.createElement("div",{className:"search-input"},r.a.createElement("label",null,"Filter by Title"),r.a.createElement("input",{ref:l,type:"text",value:c,onChange:function(e){return o(e.target.value)}}))))})),g=(n(32),function(e){return r.a.createElement("section",{className:"ingredient-list"},r.a.createElement("h2",null,"Loaded Ingredients"),r.a.createElement("ul",null,e.ingredients.map(function(t){return r.a.createElement("li",{key:t.id,onClick:e.onRemoveItem.bind(void 0,t.id)},r.a.createElement("span",null,t.title),r.a.createElement("span",null,t.amount,"x"))})))}),b=function(e,t){switch(t.type){case"SET":return t.ingredients;case"ADD":return[].concat(Object(m.a)(e),[t.ingredient]);case"DELETE":return e.filter(function(e){return e.id!==t.id});default:throw new Error("Should not get there")}},v=function(e,t){switch(t.type){case"SEND":return{loading:!0,error:null};case"RESPONSE":return Object(s.a)(Object(s.a)({},e),{},{loading:!1});case"ERROR":return{loading:!1,error:t.errorMessage};case"CLEAR":return Object(s.a)(Object(s.a)({},e),{},{error:null});default:throw new Error("Should not be reached!")}};var O=function(){var e=Object(a.useReducer)(b,[]),t=Object(u.a)(e,2),n=t[0],c=t[1],o=Object(a.useReducer)(v,{loading:!1,error:null}),i=Object(u.a)(o,2),l=i[0],s=i[1];Object(a.useEffect)(function(){s({type:"SEND"}),fetch("https://react-hooks-72dd3.firebaseio.com/ingredients.json").then(function(e){return e.json()}).then(function(e){s({type:"RESPONSE"});var t=[];for(var n in e)t.push({id:n,title:e[n].title,amount:e[n].amount});c({type:"SET",ingredients:t})}).catch(function(e){s({type:"ERROR",errorMessage:"Something went wrong!"})})},[]);var m=Object(a.useCallback)(function(e){c({type:"SET",ingredients:e})},[]);return r.a.createElement("div",{className:"App"},l.error?r.a.createElement(d,{onClose:function(){s({type:"CLEAR"})}},l.error):null,r.a.createElement(h,{onAddIngredient:function(e){s({type:"SEND"}),fetch("https://react-hooks-72dd3.firebaseio.com/ingredients.json",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(t){s({type:"RESPONSE"}),c({type:"ADD",ingredient:e})}).catch(function(e){s({type:"ERROR",errorMessage:"Something went wrong!"})})},loading:l.loading}),r.a.createElement("section",null,r.a.createElement(p,{onLoadIngredients:m}),r.a.createElement(g,{ingredients:n,onRemoveItem:function(e){s({type:"SEND"}),fetch("https://react-hooks-72dd3.firebaseio.com/ingredients/".concat(e,".json"),{method:"DELETE"}).then(function(t){s({type:"RESPONSE"}),c({type:"DELETE",id:e})}).catch(function(e){s({type:"ERROR",errorMessage:"Something went wrong!"})})}})))},y=function(e){return r.a.createElement(l.a,{path:"/",exact:!0,component:O})};o.a.render(r.a.createElement(i.a,{basename:"/Hooks-App"},r.a.createElement(y,null)),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.45fb9ad2.chunk.js.map